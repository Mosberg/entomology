{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/Mosberg/entomology/schemas/mechanics.schema.json",
  "title": "Entomology Mechanics Configuration",
  "description": "Schema for mechanics configuration including breeding, spawning, and environmental systems",
  "type": "object",
  "required": ["version", "breeding"],
  "properties": {
    "version": {
      "type": "string",
      "description": "Configuration version for migration",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "examples": ["2.0.0"]
    },
    "breeding": {
      "type": "object",
      "description": "Breeding mechanic configuration",
      "required": ["enabled"],
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable or disable breeding mechanic",
          "default": true
        },
        "globalMutationRate": {
          "type": "number",
          "description": "Global mutation probability multiplier",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.05
        },
        "breedingCooldown": {
          "type": "integer",
          "description": "Cooldown between breeding attempts in ticks",
          "minimum": 0,
          "default": 6000
        },
        "breedingPairs": {
          "type": "array",
          "description": "List of valid breeding combinations",
          "items": {
            "$ref": "#/definitions/breedingPair"
          }
        },
        "traits": {
          "type": "array",
          "description": "Trait definitions for inheritance",
          "items": {
            "$ref": "#/definitions/trait"
          }
        }
      }
    },
    "spawning": {
      "type": "object",
      "description": "Spawn mechanic configuration",
      "properties": {
        "enableDynamicRates": {
          "type": "boolean",
          "description": "Enable adaptive spawn rate adjustment",
          "default": true
        },
        "baseSpawnWeight": {
          "type": "integer",
          "description": "Base spawn weight for all specimens",
          "minimum": 1,
          "default": 10
        },
        "rarityMultipliers": {
          "type": "object",
          "description": "Spawn weight multipliers by rarity",
          "properties": {
            "common": { "type": "number", "default": 1.0 },
            "uncommon": { "type": "number", "default": 0.5 },
            "rare": { "type": "number", "default": 0.1 },
            "epic": { "type": "number", "default": 0.05 },
            "legendary": { "type": "number", "default": 0.01 }
          }
        }
      }
    },
    "environmental": {
      "type": "object",
      "description": "Environmental mechanic configuration",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Enable environmental requirements",
          "default": true
        },
        "checkInterval": {
          "type": "integer",
          "description": "Ticks between environment checks",
          "minimum": 20,
          "default": 100
        },
        "strictMode": {
          "type": "boolean",
          "description": "Strict enforcement of requirements",
          "default": false
        }
      }
    },
    "balance": {
      "type": "object",
      "description": "Balance tuning configuration",
      "properties": {
        "adaptiveDifficulty": {
          "type": "boolean",
          "description": "Enable adaptive difficulty scaling",
          "default": true
        },
        "telemetryEnabled": {
          "type": "boolean",
          "description": "Enable telemetry collection",
          "default": true
        },
        "tuningRate": {
          "type": "number",
          "description": "Rate of balance adjustments",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.1
        }
      }
    }
  },
  "definitions": {
    "breedingPair": {
      "type": "object",
      "description": "A valid breeding combination",
      "required": ["parent1", "parent2"],
      "properties": {
        "parent1": {
          "type": "string",
          "description": "First parent specimen ID",
          "pattern": "^[a-z0-9_]+:[a-z0-9_]+$"
        },
        "parent2": {
          "type": "string",
          "description": "Second parent specimen ID",
          "pattern": "^[a-z0-9_]+:[a-z0-9_]+$"
        },
        "offspring": {
          "type": "array",
          "description": "Possible offspring specimen IDs",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9_]+:[a-z0-9_]+$"
          },
          "minItems": 1
        },
        "mutations": {
          "type": "array",
          "description": "Possible mutation specimen IDs",
          "items": {
            "type": "string",
            "pattern": "^[a-z0-9_]+:[a-z0-9_]+$"
          }
        },
        "successChance": {
          "type": "number",
          "description": "Probability of successful breeding",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.5
        },
        "mutationChance": {
          "type": "number",
          "description": "Probability of mutation (multiplied by global rate)",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.05
        }
      }
    },
    "trait": {
      "type": "object",
      "description": "A genetic trait definition",
      "required": ["id"],
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique trait identifier",
          "pattern": "^[a-z0-9_]+$"
        },
        "inheritable": {
          "type": "boolean",
          "description": "Whether trait can be inherited",
          "default": true
        },
        "inheritanceChance": {
          "type": "number",
          "description": "Probability of inheritance from parent",
          "minimum": 0.0,
          "maximum": 1.0,
          "default": 0.5
        },
        "dominant": {
          "type": "boolean",
          "description": "Whether trait is dominant over recessive",
          "default": false
        }
      }
    }
  }
}
